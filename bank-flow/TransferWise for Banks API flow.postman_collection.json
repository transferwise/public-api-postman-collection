{
	"info": {
		"_postman_id": "4823d6bc-add2-4fcd-8cc7-4ac46713368b",
		"name": "TransferWise for Banks API",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "6154545"
	},
	"item": [
		{
			"name": "1. Creating or accessing existing users",
			"item": [
				{
					"name": "1a. Create User & Auth",
					"item": [
						{
							"name": "1. Client Credentials Token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);",
											"if (jsonData.access_token) postman.setEnvironmentVariable(\"client-credentials-token\", jsonData.access_token);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "{{client-secret}}",
											"type": "string"
										},
										{
											"key": "username",
											"value": "{{client-id}}",
											"type": "string"
										},
										{
											"key": "saveHelperData",
											"value": true,
											"type": "boolean"
										},
										{
											"key": "showPassword",
											"value": false,
											"type": "boolean"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "grant_type",
											"value": "client_credentials",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{host}}/oauth/token",
									"host": [
										"{{host}}"
									],
									"path": [
										"oauth",
										"token"
									]
								},
								"description": "Get a client credentials token to use to create a user"
							},
							"response": []
						},
						{
							"name": "2. Create User",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{client-credentials-token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"email\": \"new-user@email.com\",\n\t\"registrationCode\": <UUID for user>,\n\t\"language\":\"EN\"\n}"
								},
								"url": {
									"raw": "{{host}}/v1/user/signup/registration_code",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"user",
										"signup",
										"registration_code"
									]
								},
								"description": "Create a new user"
							},
							"response": []
						},
						{
							"name": "3. Get User Tokens (successful creation)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);",
											"if (jsonData.access_token) postman.setEnvironmentVariable(\"token\", jsonData.access_token);",
											"if (jsonData.refresh_token) postman.setEnvironmentVariable(\"refresh\", jsonData.refresh_token);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "{{client-secret}}",
											"type": "string"
										},
										{
											"key": "username",
											"value": "{{client-id}}",
											"type": "string"
										},
										{
											"key": "saveHelperData",
											"value": true,
											"type": "boolean"
										},
										{
											"key": "showPassword",
											"value": false,
											"type": "boolean"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "grant_type",
											"value": "registration_code",
											"type": "text"
										},
										{
											"key": "client_id",
											"value": "{{client-id}}",
											"type": "text"
										},
										{
											"key": "email",
											"value": "new-user@email.com",
											"type": "text"
										},
										{
											"key": "registration_code",
											"value": "<UUID for user>",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{host}}/oauth/token",
									"host": [
										"{{host}}"
									],
									"path": [
										"oauth",
										"token"
									]
								},
								"description": "Request access token for created user"
							},
							"response": []
						},
						{
							"name": "4a. Set contact email (for dummy emails)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"new-user@email.com\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{host}}/v1/users/{{user-id}}/contact-email",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"users",
										"{{user-id}}",
										"contact-email"
									]
								},
								"description": "Request access token for created user"
							},
							"response": []
						},
						{
							"name": "4b. Get contact email (for dummy emails)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{host}}/v1/users/{{user-id}}/contact-email",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"users",
										"{{user-id}}",
										"contact-email"
									]
								},
								"description": "Request access token for created user"
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				},
				{
					"name": "1b. Access Existing User",
					"item": [
						{
							"name": "1. Generate token from authorization code",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);",
											"if (jsonData.access_token) postman.setEnvironmentVariable(\"token\", jsonData.access_token);",
											"if (jsonData.refresh_token) postman.setEnvironmentVariable(\"refresh\", jsonData.refresh_token);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "{{client-secret}}",
											"type": "string"
										},
										{
											"key": "username",
											"value": "{{client-id}}",
											"type": "string"
										},
										{
											"key": "saveHelperData",
											"value": true,
											"type": "boolean"
										},
										{
											"key": "showPassword",
											"value": false,
											"type": "boolean"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "grant_type",
											"value": "authorization_code",
											"type": "text"
										},
										{
											"key": "client_id",
											"value": "{{client-id}}",
											"type": "text"
										},
										{
											"key": "redirect_uri",
											"value": "{{client-redirect-uri}}",
											"type": "text"
										},
										{
											"key": "code",
											"value": "<code from redirect url>",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{host}}/oauth/token",
									"host": [
										"{{host}}"
									],
									"path": [
										"oauth",
										"token"
									]
								},
								"description": "Request access token | authorization code grant type"
							},
							"response": []
						}
					]
				},
				{
					"name": "1c. Generate new token for returning user",
					"item": [
						{
							"name": "1. Generate access token from refresh token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);",
											"if (jsonData.access_token) postman.setEnvironmentVariable(\"token\", jsonData.access_token);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "{{client-secret}}",
											"type": "string"
										},
										{
											"key": "username",
											"value": "{{client-id}}",
											"type": "string"
										},
										{
											"key": "saveHelperData",
											"value": true,
											"type": "boolean"
										},
										{
											"key": "showPassword",
											"value": false,
											"type": "boolean"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded",
										"disabled": true
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "grant_type",
											"value": "refresh_token",
											"type": "text"
										},
										{
											"key": "refresh_token",
											"value": "{{refresh}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{host}}/oauth/token",
									"host": [
										"{{host}}"
									],
									"path": [
										"oauth",
										"token"
									]
								}
							},
							"response": []
						}
					],
					"description": "After previosuly completing 1a or 1b you will have a refresh token stored, use this to generate new access tokens"
				}
			]
		},
		{
			"name": "2. Create user profile",
			"item": [
				{
					"name": "1. Check profile exists",
					"item": [
						{
							"name": "1. Get profile list",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": []
								},
								"url": {
									"raw": "{{host}}/v1/profiles",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"profiles"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "2. Personal Profile",
					"item": [
						{
							"name": "1. Create personal profile",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);",
											"if (jsonData.id) postman.setEnvironmentVariable(\"personal-profile-id\", jsonData.id);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"type\": \"personal\",\n    \"details\" : {\n        \"firstName\": \"Joe\",\n        \"lastName\": \"Bloggs\",\n        \"dateOfBirth\": \"1990-01-10\",\n        \"phoneNumber\": \"+447711111111\"\n    }\n}"
								},
								"url": {
									"raw": "{{host}}/v1/profiles",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"profiles"
									]
								},
								"description": "Create a personal profile"
							},
							"response": []
						},
						{
							"name": "2. Upload verification document data (if required)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{ \n            \"firstName\": \"Joe\",\n            \"lastName\": \"Bloggs\",\n            \"type\": \"PASSPORT\",\n            \"uniqueIdentifier\": \"000111222\",\n            \"issueDate\": \"2017-01-01\",\n            \"issuerCountry\": \"GB\",\n            \"issuerState\": \"\",\n            \"expiryDate\": \"2027-12-31\"\n        }"
								},
								"url": {
									"raw": "{{host}}/v1/profiles/4753/verification-documents",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"profiles",
										"4753",
										"verification-documents"
									]
								}
							},
							"response": []
						},
						{
							"name": "3. Open update window",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": []
								},
								"url": {
									"raw": "{{host}}/v1/profiles/{{personal-profile-id}}/update-window",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"profiles",
										"{{personal-profile-id}}",
										"update-window"
									]
								}
							},
							"response": []
						},
						{
							"name": "4. Create address",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"profile\": <<personal profile id>>,\n    \"details\": {\n        \"country\": \"GB\",\n        \"firstLine\": \"1 A Road\",\n        \"postCode\": \"A11D33\",\n        \"city\": \"London\",\n        \"state\": null,\n        \"occupation\": null\n    }\n}"
								},
								"url": {
									"raw": "{{host}}/v1/addresses",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"addresses"
									]
								},
								"description": "Saves address"
							},
							"response": []
						},
						{
							"name": "5. Close update window",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": []
								},
								"url": {
									"raw": "{{host}}/v1/profiles/{{personal-profile-id}}/update-window",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"profiles",
										"{{personal-profile-id}}",
										"update-window"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				},
				{
					"name": "3. Business Profile (Optional)",
					"item": [
						{
							"name": "1. Create business profile",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);",
											"if (jsonData.id) postman.setEnvironmentVariable(\"business-profile-id\", jsonData.id);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"type\": \"business\",\n    \"details\" : {\n\t\t\"name\": \"The Business\",\n\t\t\"registrationNumber\" : \"12345\",\n\t\t\"companyType\" : \"LIMITED\",\n\t\t\"webpage\": \"http://business.com\",\n\t\t\"companyRole\": \"DIRECTOR\",\n\t\t\"descriptionOfBusiness\": \"Business Description\"\n    }\n}"
								},
								"url": {
									"raw": "{{host}}/v1/profiles",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"profiles"
									]
								},
								"description": "Create a personal profile"
							},
							"response": []
						},
						{
							"name": "2. Open update window",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": []
								},
								"url": {
									"raw": "{{host}}/v1/profiles/{{business-profile-id}}/update-window",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"profiles",
										"{{business-profile-id}}",
										"update-window"
									]
								}
							},
							"response": []
						},
						{
							"name": "3. Create address",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"profile\": <buisness profile id>,\n    \"details\": {\n        \"country\": \"GB\",\n        \"firstLine\": \"1 A Road\",\n        \"postCode\": \"A11D33\",\n        \"city\": \"London\",\n        \"state\": null,\n        \"occupation\": null\n    }\n}"
								},
								"url": {
									"raw": "{{host}}/v1/addresses",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"addresses"
									]
								},
								"description": "Saves address"
							},
							"response": []
						},
						{
							"name": "4. Create business directors",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\n             {\n                 \"firstName\": \"John\",\n                 \"lastName\": \"Doe\",\n                 \"dateOfBirth\": \"1982-01-01\",\n                 \"countryOfResidenceIso3Code\": \"usa\"\n             },\n             {\n                 \"firstName\": \"Jane\",\n                 \"lastName\": \"Doe\",\n                 \"dateOfBirth\": \"1981-01-01\",\n                 \"countryOfResidenceIso3Code\": \"usa\"\n             }\n        ]"
								},
								"url": {
									"raw": "{{host}}/v1/profiles/{{business-profile-id}}/directors",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"profiles",
										"{{business-profile-id}}",
										"directors"
									]
								}
							},
							"response": []
						},
						{
							"name": "5. Create business UBOs",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\n             {\n                 \"name\": \"John Doe\",\n                 \"dateOfBirth\": \"1982-05-20\",\n                 \"countryOfResidenceIso3Code\": \"usa\",\n                 \"addressFirstLine\": \"123 Fake St\",\n                 \"postCode\": \"FK 12345\",\n                 \"ownershipPercentage\": 30\n             },\n             {\n                 \"name\": \"Jane Doe\",\n                 \"dateOfBirth\": \"1981-12-07\",\n                 \"countryOfResidenceIso3Code\": \"usa\",\n                 \"addressFirstLine\": \"125 Fake St\",\n                 \"postCode\": \"FK 12545\",\n                 \"ownershipPercentage\": 40\n             }\n        ]"
								},
								"url": {
									"raw": "{{host}}/v1/profiles/{{business-profile-id}}/ubos",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"profiles",
										"{{business-profile-id}}",
										"ubos"
									]
								}
							},
							"response": []
						},
						{
							"name": "6. Close update window",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": []
								},
								"url": {
									"raw": "{{host}}/v1/profiles/{{business-profile-id}}/update-window",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"profiles",
										"{{business-profile-id}}",
										"update-window"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				}
			]
		},
		{
			"name": "3. Transfer Flow",
			"item": [
				{
					"name": "1. Create quote",
					"item": [
						{
							"name": "1. Create Quote",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);",
											"if (jsonData.id) postman.setEnvironmentVariable(\"new-quote-id\", jsonData.id);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"sourceCurrency\": \"GBP\",\n\t\"targetCurrency\": \"USD\",\n\t\"sourceAmount\": 100,\n\t\"targetAmount\": null,\n\t\"profile\": <owning profile id>\n}"
								},
								"url": {
									"raw": "{{host}}/v2/quotes",
									"host": [
										"{{host}}"
									],
									"path": [
										"v2",
										"quotes"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				},
				{
					"name": "2. Choose/create recipient",
					"item": [
						{
							"name": "1a. Select Existing",
							"item": [
								{
									"name": "1. Load accounts",
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Authorization",
												"value": "Bearer {{token}}"
											}
										],
										"url": {
											"raw": "{{host}}/v2/accounts/?currency=USD",
											"host": [
												"{{host}}"
											],
											"path": [
												"v2",
												"accounts",
												""
											],
											"query": [
												{
													"key": "currency",
													"value": "USD"
												}
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							]
						},
						{
							"name": "1b. Create new recipient account",
							"item": [
								{
									"name": "1. Get recipient creation dynamic form",
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Authorization",
												"value": "Bearer {{token}}"
											},
											{
												"key": "Accept-Language",
												"value": "FR",
												"disabled": true
											}
										],
										"url": {
											"raw": "{{host}}/v1/quotes/{{new-quote-id}}/account-requirements",
											"host": [
												"{{host}}"
											],
											"path": [
												"v1",
												"quotes",
												"{{new-quote-id}}",
												"account-requirements"
											]
										}
									},
									"response": []
								},
								{
									"name": "2. Update form if any field require refresh",
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											},
											{
												"key": "Authorization",
												"value": "Bearer {{token}}"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"type\": \"aba\",\n    \"details\": {\n        \"legalType\": \"PRIVATE\",\n        \"address\": {\n            \"country\": \"US\"\n        }\n    }\n}"
										},
										"url": {
											"raw": "{{host}}/v1/quotes/{{new-quote-id}}/account-requirements",
											"host": [
												"{{host}}"
											],
											"path": [
												"v1",
												"quotes",
												"{{new-quote-id}}",
												"account-requirements"
											]
										},
										"description": "POST /account-requirements"
									},
									"response": []
								},
								{
									"name": "3. Create account",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"var jsonData = JSON.parse(responseBody);",
													"if (jsonData.id) postman.setEnvironmentVariable(\"new-recipient-id\", jsonData.id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Authorization",
												"value": "Bearer {{token}}"
											},
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"accountHolderName\": \"Person USD\",\n    \"currency\": \"USD\",\n    \"country\": \"US\",\n    \"type\": \"ABA\",\n    \"details\": {\n      \"address\": {\n        \"city\": \"New York\",\n        \"countryCode\": \"US\",\n        \"postCode\": \"10025\",\n        \"state\": \"NY\",\n        \"firstLine\": \"158 Wall Street\"\n      },\n      \"abartn\": \"064000020\",\n      \"accountType\": \"CHECKING\",\n      \"accountNumber\": \"40000000000\",\n      \"email\": \"example@foobar.com\"\n    }\n  }"
										},
										"url": {
											"raw": "{{host}}/v1/accounts",
											"host": [
												"{{host}}"
											],
											"path": [
												"v1",
												"accounts"
											]
										}
									},
									"response": []
								},
								{
									"name": "4. Get account in v2 format",
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Authorization",
												"value": "Bearer {{token}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{host}}/v2/accounts/{{new-recipient-id}}",
											"host": [
												"{{host}}"
											],
											"path": [
												"v2",
												"accounts",
												"{{new-recipient-id}}"
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							]
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				},
				{
					"name": "3. Create transfer",
					"item": [
						{
							"name": "1. Update quote with selected recipient",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/merge-patch+json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"targetAccount\": <selected recipient id>\n}"
								},
								"url": {
									"raw": "{{host}}/v2/quotes/{{new-quote-id}}",
									"host": [
										"{{host}}"
									],
									"path": [
										"v2",
										"quotes",
										"{{new-quote-id}}"
									]
								},
								"description": "Set the recipient the user wishes to send to on the quote to get an updated price and delivery estimte.\n\nENSURE `Content-Type` IS `application/merge-patch+json` ELSE THIS WILL FAIL"
							},
							"response": []
						},
						{
							"name": "2. Get transfer extra info dynamic form",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"targetAccount\": <selected recipiet id>,\n    \"quoteUuid\": <quote uuid>\n}"
								},
								"url": {
									"raw": "{{host}}/v1/transfer-requirements",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"transfer-requirements"
									]
								}
							},
							"response": []
						},
						{
							"name": "3. Update transfer extra info dynamic form (if any fields require refresh)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{ \n\t\"targetAccount\": <selected recipient id>,\n    \"quoteUuid\": <quote uuid>,\n    \"details\": {\n        \"reference\": \"my ref\",\n    \t\"sourceOfFunds\": \"verification.source.of.funds.other\"\n    }\n}"
								},
								"url": {
									"raw": "{{host}}/v1/transfer-requirements",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"transfer-requirements"
									]
								}
							},
							"response": []
						},
						{
							"name": "4. Generate GUID for idempotency",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (responseBody) postman.setEnvironmentVariable(\"idempotency-guid\", responseBody);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://www.uuidgenerator.net/api/guid",
									"protocol": "https",
									"host": [
										"www",
										"uuidgenerator",
										"net"
									],
									"path": [
										"api",
										"guid"
									]
								},
								"description": "You don't have to use an API for this - you can almost certainly do it in code. This is just for testing convenience."
							},
							"response": []
						},
						{
							"name": "5. Create transfer",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);",
											"if (jsonData.id) postman.setEnvironmentVariable(\"new-transfer-id\", jsonData.id);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"targetAccount\": <selected recipient ID>,\n    \"quoteUuid\": <quote uuid>,\n    \"customerTransactionId\": <idempotency guid>,\n    \"details\": {\n        \"reference\": \"my ref\",\n        \"transferPurpose\": \"verification.transfers.purpose.pay.bills\"\n    }\n}"
								},
								"url": {
									"raw": "{{host}}/v1/transfers",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"transfers"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				}
			]
		},
		{
			"name": "4. Fund transfer",
			"item": [
				{
					"name": "1. Get payment reference for domestic transfer",
					"item": [
						{
							"name": "1. Get payment reference",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": []
								},
								"url": {
									"raw": "{{host}}/v1/quotes/{{new-quote-id}}/pay-in-methods",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"quotes",
										"{{new-quote-id}}",
										"pay-in-methods"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "5. Get updated transfer status",
			"item": [
				{
					"name": "1. Get transfer status",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": []
						},
						"url": {
							"raw": "{{host}}/v1/transfers/{{new-transfer-id}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"v1",
								"transfers",
								"{{new-transfer-id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Get updated delivery esitmation",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": []
						},
						"url": {
							"raw": "{{host}}/v1/delivery-estimates/{{new-transfer-id}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"v1",
								"delivery-estimates",
								"{{new-transfer-id}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "6. Webhooks subscription",
			"item": [
				{
					"name": "1. Client Credentials Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"if (jsonData.access_token) postman.setEnvironmentVariable(\"client-credentials-token\", jsonData.access_token);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "{{client-secret}}",
									"type": "string"
								},
								{
									"key": "username",
									"value": "{{client-id}}",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "grant_type",
									"value": "client_credentials",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{host}}/oauth/token",
							"host": [
								"{{host}}"
							],
							"path": [
								"oauth",
								"token"
							]
						},
						"description": "Get a client credentials token to use to create a user"
					},
					"response": []
				},
				{
					"name": "2. Create transfer state change webhook subscription",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{client-credentials-token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Webhook Subscription #1\",\n    \"trigger_on\": \"transfers#state-change\",\n    \"delivery\": {\n       \"version\": \"2.0.0\",\n       \"url\": \"<your webhook URL>\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{host}}/v3/applications/{{client-id}}/subscriptions/",
							"host": [
								"{{host}}"
							],
							"path": [
								"v3",
								"applications",
								"{{client-id}}",
								"subscriptions",
								""
							]
						},
						"description": "Subscribe application for transfer status change events"
					},
					"response": []
				}
			]
		},
		{
			"name": "7. Transfer state simulation",
			"item": [
				{
					"name": "1. Set as processing",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{host}}/v1/simulation/transfers/{{new-transfer-id}}/processing",
							"host": [
								"{{host}}"
							],
							"path": [
								"v1",
								"simulation",
								"transfers",
								"{{new-transfer-id}}",
								"processing"
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Set as funds_converted",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{host}}/v1/simulation/transfers/{{new-transfer-id}}/funds_converted",
							"host": [
								"{{host}}"
							],
							"path": [
								"v1",
								"simulation",
								"transfers",
								"{{new-transfer-id}}",
								"funds_converted"
							]
						}
					},
					"response": []
				},
				{
					"name": "3. Set as outgoing_payment_sent",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{host}}/v1/simulation/transfers/{{new-transfer-id}}/outgoing_payment_sent",
							"host": [
								"{{host}}"
							],
							"path": [
								"v1",
								"simulation",
								"transfers",
								"{{new-transfer-id}}",
								"outgoing_payment_sent"
							]
						}
					},
					"response": []
				},
				{
					"name": "4. Set as bounced_back",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{host}}/v1/simulation/transfers/{{new-transfer-id}}/bounced_back",
							"host": [
								"{{host}}"
							],
							"path": [
								"v1",
								"simulation",
								"transfers",
								"{{new-transfer-id}}",
								"bounced_back"
							]
						}
					},
					"response": []
				},
				{
					"name": "5. Set as funds_refunded",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{host}}/v1/simulation/transfers/{{new-transfer-id}}/funds_refunded",
							"host": [
								"{{host}}"
							],
							"path": [
								"v1",
								"simulation",
								"transfers",
								"{{new-transfer-id}}",
								"funds_refunded"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "8. Get transfer receipt",
			"item": [
				{
					"name": "Get reciept PDF",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{host}}/v1/transfers/{{new-transfer-id}}/receipt.pdf",
							"host": [
								"{{host}}"
							],
							"path": [
								"v1",
								"transfers",
								"{{new-transfer-id}}",
								"receipt.pdf"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "9. Update profile data",
			"item": [
				{
					"name": "1. Personal profile",
					"item": [
						{
							"name": "1. Open update window",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": []
								},
								"url": {
									"raw": "{{host}}/v1/profiles/{{personal-profile-id}}/update-window",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"profiles",
										"{{personal-profile-id}}",
										"update-window"
									]
								}
							},
							"response": []
						},
						{
							"name": "2. Update profile (optional)",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"id\": {{personal-profile-id}},\n    \"type\": \"personal\",\n    \"details\": {\n\t\t\"firstName\": \"Joe\",\n        \"lastName\": \"Blaggs\",\n        \"dateOfBirth\": \"1990-01-01\",\n        \"phoneNumber\": \"+3725011991\"\n    }\n}"
								},
								"url": {
									"raw": "{{host}}/v1/profiles/",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"profiles",
										""
									]
								}
							},
							"response": []
						},
						{
							"name": "3. Update address (optional)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"profile\": {{personal-profile-id}},\n    \"details\": {\n        \"country\": \"GB\",\n        \"firstLine\": \"1 A Road\",\n        \"postCode\": \"A11D33\",\n        \"city\": \"London\",\n        \"state\": null,\n        \"occupation\": null\n    }\n}"
								},
								"url": {
									"raw": "{{host}}/v1/addresses",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"addresses"
									]
								},
								"description": "Saves address"
							},
							"response": []
						},
						{
							"name": "4. Close update window Copy",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": []
								},
								"url": {
									"raw": "{{host}}/v1/profiles/{{personal-profile-id}}/update-window",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"profiles",
										"{{personal-profile-id}}",
										"update-window"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "2. Business profile",
					"item": [
						{
							"name": "2. Open update window",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": []
								},
								"url": {
									"raw": "{{host}}/v1/profiles/{{business-profile-id}}/update-window",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"profiles",
										"{{business-profile-id}}",
										"update-window"
									]
								}
							},
							"response": []
						},
						{
							"name": "3. Update address (optional)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"profile\": <business profile id>,\n    \"details\": {\n        \"country\": \"GB\",\n        \"firstLine\": \"1 A Road\",\n        \"postCode\": \"A11D33\",\n        \"city\": \"London\",\n        \"state\": null,\n        \"occupation\": null\n    }\n}"
								},
								"url": {
									"raw": "{{host}}/v1/addresses",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"addresses"
									]
								},
								"description": "Saves address"
							},
							"response": []
						},
						{
							"name": "4. Update business directors (optional)",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\n             {\n                 \"firstName\": \"John\",\n                 \"lastName\": \"Doe\",\n                 \"dateOfBirth\": \"1982-01-01\",\n                 \"countryOfResidenceIso3Code\": \"usa\"\n             },\n             {\n                 \"firstName\": \"Jane\",\n                 \"lastName\": \"Doe\",\n                 \"dateOfBirth\": \"1981-01-01\",\n                 \"countryOfResidenceIso3Code\": \"usa\"\n             }\n        ]"
								},
								"url": {
									"raw": "{{host}}/v1/profiles/{{business-profile-id}}/directors",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"profiles",
										"{{business-profile-id}}",
										"directors"
									]
								}
							},
							"response": []
						},
						{
							"name": "5. Update business UBOs (optional)",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\n             {\n                 \"name\": \"John Doe\",\n                 \"dateOfBirth\": \"1982-05-20\",\n                 \"countryOfResidenceIso3Code\": \"usa\",\n                 \"addressFirstLine\": \"123 Fake St\",\n                 \"postCode\": \"FK 12345\",\n                 \"ownershipPercentage\": 30\n             },\n             {\n                 \"name\": \"Jane Doe\",\n                 \"dateOfBirth\": \"1981-12-07\",\n                 \"countryOfResidenceIso3Code\": \"usa\",\n                 \"addressFirstLine\": \"125 Fake St\",\n                 \"postCode\": \"FK 12545\",\n                 \"ownershipPercentage\": 40\n             }\n        ]"
								},
								"url": {
									"raw": "{{host}}/v1/profiles/{{business-profile-id}}/ubos",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"profiles",
										"{{business-profile-id}}",
										"ubos"
									]
								}
							},
							"response": []
						},
						{
							"name": "6. Close update window",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": []
								},
								"url": {
									"raw": "{{host}}/v1/profiles/{{business-profile-id}}/update-window",
									"host": [
										"{{host}}"
									],
									"path": [
										"v1",
										"profiles",
										"{{business-profile-id}}",
										"update-window"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		}
	]
}